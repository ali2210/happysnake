{"ast":null,"code":"'use strict';\n\nvar Node = require('./');\nvar sliced = require('sliced');\nmodule.exports = Node.define({\n  type: 'CREATE INDEX',\n  constructor: function (table, indexName) {\n    Node.call(this);\n    this.table = table;\n    this.options = {\n      indexName: indexName,\n      columns: []\n    };\n  },\n  unique: function () {\n    this.options.type = 'unique';\n    return this;\n  },\n  spatial: function () {\n    this.options.type = 'spatial';\n    return this;\n  },\n  fulltext: function () {\n    this.options.type = 'fulltext';\n    return this;\n  },\n  using: function (algorithm) {\n    this.options.algorithm = algorithm;\n    return this;\n  },\n  on: function () {\n    var args = sliced(arguments);\n    this.options.columns = this.options.columns.concat(args);\n    return this;\n  },\n  withParser: function (parser) {\n    this.options.parser = parser;\n    return this;\n  },\n  indexName: function () {\n    var result = this.options.indexName;\n    if (!result) {\n      var columns = this.options.columns.map(function (col) {\n        var column = col.name ? col.name : col.value.name;\n        return column;\n      }).sort();\n      result = [this.table._name];\n      result = result.concat(columns);\n      result = result.join('_');\n    }\n    return result;\n  }\n});","map":{"version":3,"names":["Node","require","sliced","module","exports","define","type","constructor","table","indexName","call","options","columns","unique","spatial","fulltext","using","algorithm","on","args","arguments","concat","withParser","parser","result","map","col","column","name","value","sort","_name","join"],"sources":["/home/ali/Documents/run_prj/happysnake/node_modules/sql/lib/node/createIndex.js"],"sourcesContent":["'use strict';\n\nvar Node   = require('./');\nvar sliced = require('sliced');\n\nmodule.exports = Node.define({\n  type: 'CREATE INDEX',\n\n  constructor: function(table, indexName) {\n    Node.call(this);\n\n    this.table   = table;\n    this.options = { indexName: indexName, columns: [] };\n  },\n\n  unique: function() {\n    this.options.type = 'unique';\n    return this;\n  },\n\n  spatial: function() {\n    this.options.type = 'spatial';\n    return this;\n  },\n\n  fulltext: function() {\n    this.options.type = 'fulltext';\n    return this;\n  },\n\n  using: function(algorithm) {\n    this.options.algorithm = algorithm;\n    return this;\n  },\n\n  on: function() {\n    var args = sliced(arguments);\n    this.options.columns = this.options.columns.concat(args);\n    return this;\n  },\n\n  withParser: function(parser) {\n    this.options.parser = parser;\n    return this;\n  },\n\n  indexName: function() {\n    var result = this.options.indexName;\n\n    if (!result) {\n      var columns = this.options.columns.map(function(col) {\n        var column = col.name ? col.name : col.value.name;\n        return column;\n      }).sort();\n\n      result = [this.table._name];\n      result = result.concat(columns);\n      result = result.join('_');\n    }\n\n    return result;\n  }\n});\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,IAAI,GAAKC,OAAO,CAAC,IAAI,CAAC;AAC1B,IAAIC,MAAM,GAAGD,OAAO,CAAC,QAAQ,CAAC;AAE9BE,MAAM,CAACC,OAAO,GAAGJ,IAAI,CAACK,MAAM,CAAC;EAC3BC,IAAI,EAAE,cAAc;EAEpBC,WAAW,EAAE,SAAAA,CAASC,KAAK,EAAEC,SAAS,EAAE;IACtCT,IAAI,CAACU,IAAI,CAAC,IAAI,CAAC;IAEf,IAAI,CAACF,KAAK,GAAKA,KAAK;IACpB,IAAI,CAACG,OAAO,GAAG;MAAEF,SAAS,EAAEA,SAAS;MAAEG,OAAO,EAAE;IAAG,CAAC;EACtD,CAAC;EAEDC,MAAM,EAAE,SAAAA,CAAA,EAAW;IACjB,IAAI,CAACF,OAAO,CAACL,IAAI,GAAG,QAAQ;IAC5B,OAAO,IAAI;EACb,CAAC;EAEDQ,OAAO,EAAE,SAAAA,CAAA,EAAW;IAClB,IAAI,CAACH,OAAO,CAACL,IAAI,GAAG,SAAS;IAC7B,OAAO,IAAI;EACb,CAAC;EAEDS,QAAQ,EAAE,SAAAA,CAAA,EAAW;IACnB,IAAI,CAACJ,OAAO,CAACL,IAAI,GAAG,UAAU;IAC9B,OAAO,IAAI;EACb,CAAC;EAEDU,KAAK,EAAE,SAAAA,CAASC,SAAS,EAAE;IACzB,IAAI,CAACN,OAAO,CAACM,SAAS,GAAGA,SAAS;IAClC,OAAO,IAAI;EACb,CAAC;EAEDC,EAAE,EAAE,SAAAA,CAAA,EAAW;IACb,IAAIC,IAAI,GAAGjB,MAAM,CAACkB,SAAS,CAAC;IAC5B,IAAI,CAACT,OAAO,CAACC,OAAO,GAAG,IAAI,CAACD,OAAO,CAACC,OAAO,CAACS,MAAM,CAACF,IAAI,CAAC;IACxD,OAAO,IAAI;EACb,CAAC;EAEDG,UAAU,EAAE,SAAAA,CAASC,MAAM,EAAE;IAC3B,IAAI,CAACZ,OAAO,CAACY,MAAM,GAAGA,MAAM;IAC5B,OAAO,IAAI;EACb,CAAC;EAEDd,SAAS,EAAE,SAAAA,CAAA,EAAW;IACpB,IAAIe,MAAM,GAAG,IAAI,CAACb,OAAO,CAACF,SAAS;IAEnC,IAAI,CAACe,MAAM,EAAE;MACX,IAAIZ,OAAO,GAAG,IAAI,CAACD,OAAO,CAACC,OAAO,CAACa,GAAG,CAAC,UAASC,GAAG,EAAE;QACnD,IAAIC,MAAM,GAAGD,GAAG,CAACE,IAAI,GAAGF,GAAG,CAACE,IAAI,GAAGF,GAAG,CAACG,KAAK,CAACD,IAAI;QACjD,OAAOD,MAAM;MACf,CAAC,CAAC,CAACG,IAAI,CAAC,CAAC;MAETN,MAAM,GAAG,CAAC,IAAI,CAAChB,KAAK,CAACuB,KAAK,CAAC;MAC3BP,MAAM,GAAGA,MAAM,CAACH,MAAM,CAACT,OAAO,CAAC;MAC/BY,MAAM,GAAGA,MAAM,CAACQ,IAAI,CAAC,GAAG,CAAC;IAC3B;IAEA,OAAOR,MAAM;EACf;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}